# Config specific to Betterment

source ~/.local/.secrets

# Settings for Betterment Webapp build

# aliases
alias webapp='~/my/toolbox/tomcat-6.0.18/bin/catalina.sh jpda'

# give the VM a semi-ridiculous amount of memory.
LOTS_O_MEM='-Xmx1024m -Xms256m -XX:MaxPermSize=128m'
# make JVM GC sweep permgen as well.
GC_PERMGEN='-XX:+CMSClassUnloadingEnabled -XX:+UseConcMarkSweepGC'

DO_DUMPS='-XX:+HeapDumpOnOutOfMemoryError'
# don't show the java dock icon
# this breaks osx.gradle being able to auto-connect VPN.
# argh.
NO_DOCK_ICON="-Djava.awt.headless=true"

export GRADLE_HOME=$(find $(dirname $(brew --prefix)$(readlink $(which gradle) | cut -c3-))/.. -name libexec)
export GRADLE_OPTS="$LOTS_O_MEM $GC_PERMGEN $NO_DOCK_ICON $DO_DUMPS"
export JAVA_OPTS="$LOTS_O_MEM $GC_PERMGEN $NO_DOCK_ICON $DO_DUMPS"
export CATALINA_OPTS="$LOTS_O_MEM $GC_PERMGEN $DO_DUMPS"
